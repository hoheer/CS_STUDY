# CS_STUDY

1. 운영체제 
 - 프로세스와 스레드의 차이
  프로그램: 어떤 작업을 위해 실행할 수 있는 파일
  프로세스: 연속적으로 실행되고 있는 컴퓨터 프로그램
  프로세서: 내부에서 수행하는 하드웨어의 유닛단위(서 랑 스 랑 구별 잘할것)
   프로세스의 상태 
    -1. 생성: 프로세스가 생성되는 중
    -2. 실행: 프로세스가 CPU를 점유하여 명령어들이 실행되고 있는 중
    -3. 준비: 실행되진 않지만 언제든 사용가능하도록 CPU 할당을 대기하고 있는 단계
    -4. 대기: 입출력 완료 등 특정 시그널을 기다리고 있는 상태 
    -5. 종료: 프로세스 실행이 종료됨
    
   스레드: 프로세스가 실행되는 여러 흐름의 단위, 프로세스의 특정한 수행 경로
     - STACK만 따로 할당 받고 코드, 데이터. 힙 영역은 모든 스레드가 공유한다. 스택만을 독립적으로 가지는 것은 스택이 호출시 전달되는 인자, 돌아갈 주소값, 함수 내 지역 변수등을 저장되기 위해 사용되는 메모리 공간이기에 독립적인 함수호출이 가능하다는 것이고 이는 독립적인 실행흐름을 추가하고자 하는 스레드의 목적의 최소한의 요구사항이기도 하다. 
     
     
#스레드를 사용할 경우 충돌을 막기 위해 동기화를 해야하는데 이때 교착 상태에 유념해야 한다. 

 - 멀티 프로세스와 멀티 스레드 
  1. 멀티 프로세스: 하나의 응용프로그램을 여러 프로세스로 구성하여 하나의 프로세스가 하나의 작업을 맡게 하는 것. 
   -> 프로세스들은 독립된 메모리를 사용하기 때문에 문맥 교환 과정에서 캐쉬 메모리 초기화 등 무거운 작업이 진행되고 시간이 소요되며 오버헤드가 발생 
  2. 멀티 스레드: 하나의 응용프로그램을 여러개의 스레드로 구성하고 각 스레드가 하나의 작업을 맡게 하는 것, 웹 서버가 대표적인 멀티 스레드 응용프로그램 (node.js 는 싱글 스레드)
   -> 공유하는 메모리가 많아 문맥 교환 비용이 멀티 프로세스에 비해 저렴하다. 단 공유하는 메모리가 많아 하나의 쓰레드에 문제가 발생하면 전체 프로세스가 영향을 받는다. 
   
   - 멀티 프로세스 대신 멀티 스레드를 사용하는 이유 
    프로그램을 여러개 키는 것 보다 하나의 프로그램 안에서 여러 작업을 해결하는 것이 당연히 효율적이다. 문맥교환시 스레드는 스택 영역만 처리하게 되기 때문. 
    
- 교착상태란 무엇이며 교착 상태가 발생하기 위해서는 어떤 조건이 있어야 하나요? 
 교착상태(dead-lock): 서로 상대방의 작업이 끝나기 만을 기다리고 있기 때문에 결과적으로 아무것도 완료되지 못하는 상태를 말한다. 
  발생조건 4가지 모두가 충족되야 
   1. 상호배체: 한번에 한개의 프로세스만이 공유 자원을 사용할 수 있어야 한다.
   2. 점유와 대기: 최소한 하나의 자원을 점유하고 있으면서 다른 프로세스에 할당되어 사용되고 있는 자원을 추가로 점유하기 위해 대기하는 프로세스가 있어야 한다.
   3. 비선점: 다른 프로세스에 할당된 자원은 사용이 끝날 때까지 강제로 빼앗을 수 없어야 한다. 
   4. 순환 대기: 프로세스의 집합에서 n-1 은 n이 점유한 자원을 대기하여야 한다. 

 - 교착상태 해결법 -> 예방 회피, 탐지 및 회복 이렇게 크게 3가지가 존재

1. 예방 
 - 자원의 상호배제 조건 방지: 상호배제는 자원의 비 공유가 전제되어야 한다. 공유자원은 배타적 접근이 필요없어 교착 상태가 발생하지 않는다. 
 - 점유와 대기 조건 방지: 방지하기 위해선 프로세스가 작업을 수행하기 전에 필요한 자원을 모두 요청하고 획득해야 한다. 이를 최대 자원 할당 이라고 하는데 이는 자원 효율성이 낮고 기아 상태를 발생할 수 있다는 단점이 존재한다.  
 - 비선점 조건 방지: 이미 할당된 자원에 선점권이 없어야 한다. 하지만 비선점 조건을 사용한다면 어떤 프로세스든 중간에 자원을 사용할 수 있어서 기존에 사용중이던 프로세스는 작업 내용을 잃을 수 있다. 
 - 순환 대기 조건 방지: 모든 자원에 일련의 순서를 부여하고 각 프로세스가 오름차순으로만 자원을 요청할 수 있게 한다. 하지만 작업에 필요한 자원은 훨씬 오래 전부터 자원을 할당받은 상태가 되야 하므로 자원의 낭비가 있을 수 있을 수 있다. 

2. 회피
 - 프로세스 시작 중단, 은행가 알고리즘 등이 존재

동기화 문제의 해결법 
 - 유저 모드 동기화 : CRITICAL SECTION
 - 커널 모드 동기화: semaphore, mutex 
   CRITICAL SECTION: 한 프로세스 내의 스레드 사이에서만 동기화가 가능하다. 
   mutex: 여러 프로세스의 스레드 사이에서도 동기화가 가능하다. (커널 객체이기 때문이다.)
   세마포어: 뮤텍스는 동기화 시 하나의 스레드만 실행되게 하지만 세마포어는 지정된 수만큼의 스레드가 동시에 실행되도록 동기화 하는 것이 가능함. 
   
   
컨텍스트 스위칭
 : 멀티 프로세스 환경에서 cpu가 하나의 프로세스를 실행하고 있는 상태에서 인터럽트 요청에 의해 다음 우선 순위의 프로세스가 실행되어야 할 때 기존의 프로세스의 상태 또는 레지스터 값을 저장하고 cpu가 다음 프로세스를 수행하도록 새로운 프로세스의 상태 또는 레지스터 값을 교체하는 작업
